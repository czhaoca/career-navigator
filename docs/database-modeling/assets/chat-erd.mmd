erDiagram
    PF_USERS ||--o{ PF_CONVERSATIONS : "owns"
    PF_CONVERSATIONS ||--o{ PF_MESSAGES : "contains"
    PF_CONVERSATIONS ||--o| PF_CONVERSATION_SUMMARIES : "summarized_by"
    PF_MESSAGES }o--|| PF_USERS : "authored_by"
    
    PF_CONVERSATIONS {
        VARCHAR2_100 conversation_id PK
        VARCHAR2_100 user_id FK
        VARCHAR2_500 title
        VARCHAR2_1000 first_message
        TIMESTAMP last_message_at
        NUMBER message_count
        CHAR_1 is_active
        TIMESTAMP created_at
        TIMESTAMP updated_at
    }
    
    PF_MESSAGES {
        VARCHAR2_100 message_id PK
        VARCHAR2_100 conversation_id FK
        VARCHAR2_100 user_id FK
        VARCHAR2_20 role
        CLOB content
        CLOB metadata
        NUMBER token_count
        TIMESTAMP created_at
    }
    
    PF_CONVERSATION_SUMMARIES {
        VARCHAR2_100 summary_id PK
        VARCHAR2_100 conversation_id FK
        CLOB summary_text
        CLOB key_topics
        CLOB action_items
        TIMESTAMP generated_at
    }